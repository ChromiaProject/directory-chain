# Directory Chain operations

## Operations

| Operation                                  | Permission                              | Rate limit    | Arguments                                                                                                                                                                                                                                                 | Description                                                                                                                 |
|--------------------------------------------|-----------------------------------------|---------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------|
| init                                       | any                                     | no(only once) | system_anchoring_config: byte_array?<br>cluster_anchoring_config: byte_array?                                                                                                                                                                             | Register initial provider.                                                                                                  |
| init_economy_chain                         | system provider                         | actions       | my_pubkey: pubkey, economy_chain_config: byte_array                                                                                                                                                                                                       | Start economy chain.                                                                                                        |
| register_provider                          | SP > [NP, CNP], NP > [CNP], CNP > [CNP] | actions       | my_pubkey: pubkey<br>pubkey<br>provider_tier                                                                                                                                                                                                              | SP can register NP, CNP; NP can register CNP; CNP can register CNP                                                          |
| promote_node_provider                      | system provider                         | actions       | my_pubkey: pubkey<br>provider_pubkey: pubkey                                                                                                                                                                                                              | Only SP can promote CNP to NP.                                                                                              |
| transfer_action_points                     | any to any                              | actions       | from: pubkey<br>to: pubkey<br>amount: integer                                                                                                                                                                                                             | Transfer action points from one provider to another.                                                                        |
| update_provider                            | self                                    | actions       | my_pubkey: pubkey<br>name?<br>url: text?                                                                                                                                                                                                                  | Update name and/or url of provider.                                                                                         |
| register_node_with_node_data               | self                                    | actions       | my_pubkey: pubkey<br>node_data: register_node_data                                                                                                                                                                                                        | Register provider node.                                                                                                     |
| replace_node_with_node_data                | node provider (owner)                   | actions       | my_pubkey: pubkey<br>node_data: replace_node_data                                                                                                                                                                                                         | Replace node with node data.                                                                                                |
| enable_node                                | node provider (owner)                   | actions       | my_pubkey: pubkey<br>node_pubkey: pubkey                                                                                                                                                                                                                  | Change node state to active.                                                                                                |
| disable_node                               | node provider: (SP, NP, SP > NP)        | actions       | my_pubkey: pubkey<br>node_pubkey: pubkey                                                                                                                                                                                                                  | Disable node and remove node and its replicas from cluster.                                                                 |
| remove_node                                | node provider (owner)                   | actions       | my_pubkey: pubkey<br>node_pubkey: pubkey                                                                                                                                                                                                                  | Remove node.                                                                                                                |
| update_node_with_node_data                 | node provider (owner)                   | actions       | my_pubkey: pubkey<br>node_data: update_node_data                                                                                                                                                                                                          | Update node data.                                                                                                           |
| add_node_to_cluster                        | cluster provider                        | actions       | my_pubkey: pubkey<br>node_pubkey: pubkey<br>cluster_name: text                                                                                                                                                                                            | Adding a node to a cluster automatically makes it signer of all bc in this cluster. Only one node per provider and cluster. |
| add_replica_node_to_cluster                | cluster provider                        | actions       | my_pubkey: pubkey<br>node_pubkey: pubkey<br>cluster_name: text                                                                                                                                                                                            | Add replica node to cluster.                                                                                                |
| remove_replica_node_from_cluster           | cluster provider                        | actions       | my_pubkey: pubkey<br>node_pubkey: pubkey<br>cluster_name: text                                                                                                                                                                                            | Remove replica node from cluster.                                                                                           |
| remove_container                           | cluster provider governor               | actions       | me: pubkey<br>container_name: text                                                                                                                                                                                                                        | Remove container.                                                                                                           |
| add_blockchain_replica                     | node provider (owner)                   | actions       | my_pubkey: pubkey<br>blockchain_rid: byte_array<br>node_pubkey: byte_array                                                                                                                                                                                | Add blockchain replica.                                                                                                     |
| remove_blockchain_replica                  | node provider (owner)                   | actions       | my_pubkey: pubkey<br>blockchain_rid: byte_array<br>node_pubkey: byte_array                                                                                                                                                                                | Remove blockchain replica.                                                                                                  |
| create_cluster                             | system provider                         | actions       | my_pubkey: pubkey<br>name<br>governor_voter_set: text<br>provider_pubkeys: list<pubkey>                                                                                                                                                                   | Creates a cluster with a set of providers and standard cluster units.                                                       |
| create_cluster_with_units                  | system provider                         | actions       | my_pubkey: pubkey<br>name<br>governor_voter_set: text<br>provider_pubkeys: list<pubkey><br>cluster_units: integer                                                                                                                                         | Creates a cluster with a set of providers and custom cluster units.                                                         |
| create_cluster_with_cluster_data           | system provider                         | actions       | my_pubkey: pubkey<br>name<br>governor_voter_set: text<br>provider_pubkeys: list<pubkey><br>cluster_creation_data                                                                                                                                          | Creates a cluster with a set of providers and custom cluster units and custom extra storage.                                |
| create_cluster_from                        | system provider                         | actions       | my_pubkey: pubkey<br>name<br>governor_voter_set: text<br>provider_voter_set: text                                                                                                                                                                         | Creates a cluster provided by the members of an existing voter set.                                                         |
| create_cluster_from_with_units             | system provider                         | actions       | my_pubkey: pubkey<br>name<br>governor_voter_set: text<br>provider_voter_set: text<br>cluster_units: integer                                                                                                                                               | Creates a cluster provided by the members of an existing voter set with custom cluster units.                               |
| create_cluster_from_with_cluster_data      | system provider                         | actions       | my_pubkey: pubkey<br>name<br>governor_voter_set: text<br>provider_voter_set: text<br>cluster_creation_data                                                                                                                                                | Creates a cluster provided by the members of an existing voter set with custom cluster units and custom extra storage.      |
| create_container                           | cluster governor                        | actions       | me: pubkey<br>name<br>cluster_name: text<br>consensus_threshold: integer<br>deployers: list<pubkey>                                                                                                                                                       | Creates container.                                                                                                          |
| create_container_with_resource_limits      | cluster governor                        | actions       | me: pubkey<br>name<br>cluster_name: text<br>consensus_threshold: integer<br>deployers: list<pubkey><br>resource_limits: map<container_resource_limit_type, integer>                                                                                       | Creates container with resource limits.                                                                                     |
| create_container_from                      | cluster governor                        | actions       | me: pubkey<br>name<br>cluster_name: text<br>consensus_threshold: integer<br>voter_set_name: text                                                                                                                                                          | Creates container with voters set.                                                                                          |
| create_container_from_with_resource_limits | cluster governor                        | actions       | me: pubkey<br>name<br>cluster_name: text<br>consensus_threshold: integer<br>voter_set_name: text<br>resource_limits: map<container_resource_limit_type, integer>                                                                                          | Creates container with voters set and resource limits.                                                                      |
| add_container_deployer                     | cluster governor                        | actions       | me: pubkey<br>container_name: text<br>deployer_pubkey: pubkey                                                                                                                                                                                             | Creates container deployer.                                                                                                 |
| remove_container_deployer                  | cluster governor                        | actions       | me: pubkey<br>container_name: text<br>deployer_pubkey: pubkey                                                                                                                                                                                             | Remove container deployer.                                                                                                  |
| create_voter_set                           | any                                     | actions       | my_pubkey: pubkey<br>name<br>threshold: integer<br>initials: list<pubkey>?<br>governor: text?                                                                                                                                                             | Create a voter set.                                                                                                         |
| make_vote                                  | voter set member                        | no            | my_pubkey: pubkey<br>proposal_id: integer<br>vote: boolean                                                                                                                                                                                                | Vote for proposal.                                                                                                          |
| retract_vote                               | voter set member                        | no            | my_pubkey: pubkey<br>proposal_id: integer                                                                                                                                                                                                                 | Delete vote for proposal.                                                                                                   |
| propose_cluster_provider                   | cluster governor                        | actions       | my_pubkey: pubkey<br>cluster_name: text<br>provider_pubkey: pubkey<br>add: boolean<br>description: text                                                                                                                                                   | Propose cluster provider.                                                                                                   |
| propose_cluster_limits                     | cluster governor                        | actions       | my_pubkey: pubkey<br>cluster_name: text<br>cluster_units: integer?<br>extra_storage: integer?<br>description: text                                                                                                                                        | Propose cluster limits.                                                                                                     |
| propose_remove_cluster                     | cluster governor AND empty cluster      | actions       | my_pubkey: pubkey<br>name<br>description: text                                                                                                                                                                                                            | Propose remove cluster with no dapp containers.                                                                             |
| propose_providers                          | system provider                         | actions       | my_pubkey: pubkey<br>provider_infos: list<provider_info><br>tier: provider_tier<br>system: boolean<br>active: boolean<br>description: text                                                                                                                | Propose providers.                                                                                                          |
| propose_provider_is_system                 | system provider                         | actions       | my_pubkey: pubkey<br>provider_pubkey: pubkey<br>promote: boolean<br>description: text                                                                                                                                                                     | Propose promotion or demotion of a provider to system provider.                                                             |
| propose_provider_quota                     | system provider                         | actions       | my_pubkey: pubkey<br>tier: provider_tier<br>provider_quota_type<br>value: integer<br>description: text                                                                                                                                                    | Propose provider quotas.                                                                                                    |
| propose_provider_state                     | SP > [SP, NP, CNP], NP > CNP            | actions       | my_pubkey: pubkey<br>provider_pubkey: pubkey<br>active: boolean<br>description: text                                                                                                                                                                      | Propose provider change state to another provider. NP can enable/disable CNP without voting.                                |
| propose_container                          | cluster governor                        | actions       | my_pubkey: pubkey<br>cluster_name: text<br>name<br>deployer_name: text<br>description: text                                                                                                                                                               | Propose container creation.                                                                                                 |
| propose_container_limits                   | cluster governor                        | actions       | my_pubkey: pubkey<br>container_name: text<br>limits: map<container_resource_limit_type, integer><br>description: text                                                                                                                                     | Propose update container limits.                                                                                            |
| propose_remove_container                   | cluster governor AND empty container    | actions       | my_pubkey: pubkey<br>name<br>description: text                                                                                                                                                                                                            | Propose remove container.                                                                                                   |
| propose_blockchain                         | container deployer                      | actions       | my_pubkey: pubkey<br>config_data: byte_array<br>bc_name: text<br>container_name: text<br>description: text                                                                                                                                                | Propose a new blockchain to a container.                                                                                    |
| propose_blockchain_action                  | container deployer                      | actions       | my_pubkey: pubkey<br>blockchain_rid: byte_array<br>action: blockchain_action<br>description: text                                                                                                                                                         | Propose a blockchain acton.                                                                                                 |
| propose_blockchain_unarchive_action        | container deployer                      | actions       | my_pubkey: pubkey<br>blockchain_rid: byte_array<br>destination_container: text<br>final_height: integer<br>description: text                                                                                                                              | Propose blockchain unarchive acton.                                                                                         |
| propose_configuration                      | container deployer                      | actions       | my_pubkey: pubkey<br>blockchain_rid: byte_array<br>config_data: byte_array<br>description: text                                                                                                                                                           | Propose new blockchain configuration.                                                                                       |
| propose_configuration_at                   | container deployer                      | actions       | my_pubkey: pubkey<br>blockchain_rid: byte_array<br>config_data: byte_array<br>height: integer<br>force: boolean<br>description: text                                                                                                                      | Propose new blockchain configuration at height. Use force flag to override existing configuration at height.                |
| propose_forced_configuration               | container deployer                      | actions       | my_pubkey: pubkey<br>blockchain_rid: byte_array<br>config_data: byte_array<br>height: integer<br>description: text                                                                                                                                        | Propose forcing a new configuration for a PAUSED blockchain at height.                                                      |
| propose_import_blockchain                  | container deployer                      | actions       | my_pubkey: pubkey<br>config_data: byte_array<br>blockchain_rid: byte_array<br>bc_name: text<br>container_name: text<br>description: text                                                                                                                  | Propose import blockchain.                                                                                                  |
| propose_import_configuration               | container deployer                      | actions       | my_pubkey: pubkey<br>blockchain_rid: byte_array<br>height: integer<br>config_data: byte_array<br>description: text                                                                                                                                        | Propose import configuration.                                                                                               |
| propose_finish_import_blockchain           | container deployer                      | actions       | my_pubkey: pubkey<br>blockchain_rid: byte_array<br>final_height: integer<br>description: text                                                                                                                                                             | Propose finish import blockchain.                                                                                           |
| propose_foreign_blockchain_blocks_import   | container deployer                      | actions       | my_pubkey: pubkey<br>blockchain_rid: byte_array<br>final_height: integer<br>description: text                                                                                                                                                             | Propose import foreign blockchain blocks.                                                                                   |
| propose_foreign_blockchain_import          | container deployer                      | actions       | my_pubkey: pubkey<br>node_pubkey: pubkey<br>host: text<br>port: integer<br>api_url: text<br>chain0_rid: byte_array<br>blockchain_name: text<br>blockchain_rid: byte_array<br>initial_config_data: byte_array<br>container_name: text<br>description: text | Propose import foreign blockchain.                                                                                          |
| propose_blockchain_move                    | container deployer                      | actions       | my_pubkey: pubkey<br>blockchain_rid: byte_array<br>destination_container: text<br>description: text                                                                                                                                                       | Propose blockchain move.                                                                                                    |
| propose_blockchain_move_finish             | container deployer                      | actions       | my_pubkey: pubkey<br>blockchain_rid: byte_array<br>final_height: integer<br>description: text                                                                                                                                                             | Propose blockchain move finish.                                                                                             |
| propose_cluster_anchoring_configuration    | system provider                         | actions       | my_pubkey: pubkey<br>config_data: byte_array                                                                                                                                                                                                              | Propose cluster anchoring configuration.                                                                                    |
| propose_update_voter_set                   | voter set governor                      | actions       | my_pubkey: pubkey<br>voter_set_name: text<br>new_threshold: integer?<br>new_governor: name?<br>new_member: list<pubkey><br>remove_member: list<pubkey><br>description: text                                                                               | Propose update voter set.                                                                                                   |
| revoke_proposal                            | proposal owner                          | actions       | my_pubkey: pubkey<br>proposal_rowid: rowid                                                                                                                                                                                                                | Revoke proposal.                                                                                                            |
| make_common_vote                           | common voter set member                 | no            | pubkey<br>proposal_id: rowid<br>vote: boolean                                                                                                                                                                                                             | Make common vote.                                                                                                           |
| revoke_common_proposal                     | proposal owner                          | no            | pubkey<br>proposal_id: rowid                                                                                                                                                                                                                              | Revoke common proposal.                                                                                                     |

## Arguments

| Name                          | Type       | Fields                                                                                                                                                                                            | Description                          |
|-------------------------------|------------|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|
| system_anchoring_config       | byte_array |                                                                                                                                                                                                   | System anchoring blockchain config.  |
| cluster_anchoring_config      | byte_array |                                                                                                                                                                                                   | Cluster anchoring blockchain config. |
| my_pubkey                     | pubkey     |                                                                                                                                                                                                   | Pubkey of a provider.                |
| register_node_data            | struct     | pubkey<br>host: text<br>port: integer<br>api_url: text<br>clusters: list<text><br>cluster_units: integer<br>territory: text<br>extra_storage: integer                                             | Data for registering a node.         |
| replace_node_data             | struct     | old_node_key: pubkey<br>new_node_key: pubkey<br>new_host: text?<br>new_port: integer?<br>new_api_url: text?<br>new_cluster_units: integer?<br>new_territory: text?<br>new_extra_storage: integer? | Data for replacing a node.           |
| update_node_data              | struct     | pubkey<br>host: text?<br>port: integer?<br>api_url: text?<br>cluster_units: integer?<br>territory: text?<br>extra_storage: integer?                                                               | Data for updating a node.            |
| cluster_creation_data         | struct     | cluster_units: integer<br>extra_storage: integer                                                                                                                                                  | Data for cluster creation.           |
| provider_info                 | struct     | pubkey<br>name<br>url: text                                                                                                                                                                       | Provider info.                       |
| provider_tier                 | enum       | COMMUNITY_NODE_PROVIDER<br>NODE_PROVIDER                                                                                                                                                          | Provider tiers.                      |
| provider_quota_type           | enum       | max_actions_per_day<br>max_nodes<br>max_containers                                                                                                                                                | Provider quota type.                 |
| blockchain_action             | enum       | pause<br>resume<br>remove<br>archive<br>unarchive                                                                                                                                                 | Blockchain actions.                  |
| container_resource_limit_type | enum       | container_units<br>max_blockchains<br>extra_storage<br>                                                                                                                                           | Container resource limit type.       |