# Directory Chain queries

## Queries

| Name                                                          | Arguments                                                                         | Return type                                                                                                                                                       | Description                                                                           |
|---------------------------------------------------------------|-----------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------| 
| get_nodes_by_provider                                         | pubkey                                                                            | provider_node_data                                                                                                                                                | Returns nodes data by provider pubkey.                                                |
| get_provider_points                                           | pubkey                                                                            | integer                                                                                                                                                           | Returns actions rate limit points.                                                    |
| get_provider_clusters                                         | pubkey                                                                            | list\<text\>                                                                                                                                                      | Returns clusters of a provider.                                                       |
| get_provider_data                                             | pubkey                                                                            | provider                                                                                                                                                          | Returns provider by pubkey.                                                           |
| get_all_providers                                             |                                                                                   | list\<provider\>                                                                                                                                                  | Returns all providers.                                                                |
| get_providers                                                 | tier: provider_tier<br>system: boolean<br>require_active: boolean                 | list\<provider\>                                                                                                                                                  | Returns providers by criteria.                                                        |
| get_provider_quotas                                           |                                                                                   | list\<provider_quota\>                                                                                                                                            | Returns provider quotas.                                                              |
| get_cluster                                                   | name                                                                              | cluster                                                                                                                                                           | Returns cluster by name.                                                              |
| get_clusters                                                  |                                                                                   | list\<cluster\>                                                                                                                                                   | Returns all clusters.                                                                 |
| get_cluster_data                                              | name                                                                              | cluster_data                                                                                                                                                      | Returns cluster data by cluster name.                                                 |
| get_operational_dapp_clusters                                 |                                                                                   | list\<cluster_data\>                                                                                                                                              | Returns operational dapp clusters.                                                    |
| get_cluster_providers                                         | name                                                                              | list\<(name:text, pubkey:pubkey)\>                                                                                                                                | Returns providers by cluster name.                                                    |
| get_cluster_nodes                                             | name                                                                              | list\<cluster_node\>                                                                                                                                              | Returns nodes by cluster name.                                                        |
| get_cluster_replica_nodes                                     | name                                                                              | list\<cluster_replica_node\>                                                                                                                                      | Returns cluster replica nodes by cluster name.                                        |
| get_cluster_containers                                        | name                                                                              | list\<(name:text, deployer:text)\>                                                                                                                                | Returns cluster containers by cluster name.                                           |
| get_cluster_blockchains                                       | name                                                                              | list\<byte_array\>                                                                                                                                                | Returns cluster's blockchains ids by cluster name.                                    |
| get_cluster_api_urls                                          | name                                                                              | list\<text\>                                                                                                                                                      | Returns cluster nodes api urls.                                                       |
| get_node                                                      | pubkey                                                                            | node                                                                                                                                                              | Returns node.                                                                         |
| get_node_data                                                 | pubkey                                                                            | node_data                                                                                                                                                         | Returns node data.                                                                    |
| list_clusters_of_node                                         | pubkey                                                                            | list\<text\>                                                                                                                                                      | Returns clusters of node.                                                             |
| get_node_containers                                           | pubkey                                                                            | list\<(cluster:text, name:text, deployer:text)\>                                                                                                                  | Returns containers of node's clusters.                                                |
| get_all_nodes                                                 | include_inactive: boolean                                                         | list\<node\>                                                                                                                                                      | Returns all nodes.                                                                    |
| get_container                                                 | name                                                                              | container                                                                                                                                                         | Returns container.                                                                    |
| get_container_data                                            | name                                                                              | container_data                                                                                                                                                    | Returns container data.                                                               |
| get_container_blockchain                                      | name                                                                              | list\<(rid: pubkey, name: text, system: boolean, state: blockchain_state)\>                                                                                       | Returns container blockchains data.                                                   |
| get_containers                                                | name                                                                              | list\<(cluster:text, name:text, deployer:text)\>                                                                                                                  | Returns all containers.                                                               |
| get_blockchain                                                | rid: byte_array                                                                   | blockchain                                                                                                                                                        | Returns blockchain by rid.                                                            |
| get_blockchain_signers                                        | blockchain_rid: byte_array                                                        | list\<(pubkey: byte_array, host: text, port: integer, active: boolean, last_updated: integer)\>                                                                   | Returns blockchain signer nodes.                                                      |
| get_blockchain_replicas                                       | blockchain_rid: byte_array                                                        | list\<(pubkey: byte_array, host: text, port: integer, active: boolean, last_updated: integer)\>                                                                   | Returns blockchain replica nodes.                                                     |
| get_blockchains                                               | include_inactive: boolean                                                         | list\<struct\<blockchain\>                                                                                                                                        | Returns all blockchains by criteria.                                                  |
| get_blockchain_info                                           | rid: byte_array                                                                   | blockchain_info                                                                                                                                                   | Returns blockchain info.                                                              |
| get_blockchain_info_list                                      | include_inactive: boolean                                                         | list\<blockchain_info\>                                                                                                                                           | Returns blockchains info by criteria.                                                 |
| get_blockchain_cluster                                        | blockchain_rid: byte_array                                                        | text                                                                                                                                                              | Returns blockchain's cluster.                                                         |
| get_blockchain_api_urls                                       | blockchain_rid: byte_array                                                        | list\<text\>                                                                                                                                                      | Returns blockchain nodes api urls.                                                    |
| get_blockchain_signer_updates                                 | blockchain_rid: byte_array<br>from_height: integer                                | list\<blockchain_signers_info>                                                                                                                                    | Returns blockchain configuration signers at height.                                   |
| get_compressed_configuration_parts                            | configuration_part_hashes: set<byte_array>                                        | list\<byte_array>                                                                                                                                                 | Returns compressed blockchain configuration part.                                     |
| get_importing_foreign_blockchain_info                         | blockchain_rid: byte_array                                                        | importing_foreign_blockchain                                                                                                                                      | Returns importing foreign blockchain.                                                 |
| get_moving_blockchain_info                                    | blockchain_rid: byte_array                                                        | moving_blockchain                                                                                                                                                 | Returns moving blockchain.                                                            |
| get_unarchiving_blockchain_info                               | blockchain_rid: byte_array                                                        | unarchiving_blockchain                                                                                                                                            | Returns unarchiving blockchain.                                                       |
| get_cluster_anchoring_configuration                           |                                                                                   | byte_array                                                                                                                                                        | Returns cluster anchoring raw config.                                                 |
| list_voter_sets                                               |                                                                                   | list\<voter_set\>                                                                                                                                                 | Returns voters set.                                                                   |
| get_voter_set_info                                            | name                                                                              | name:text<br>threshold:integer<br>governor:text<br>members:list\<pubkey\>                                                                                        | Returns voters set info.                                                              |
| get_voter_set                                                 | name                                                                              | voter_set                                                                                                                                                         | Returns voter set by name.                                                            |
| get_voter_set_governor                                        | name                                                                              | voter_set_governance                                                                                                                                              | Returns voter set governance.                                                         |
| get_voter_set_members                                         | name                                                                              | list\<voter_set_member\>                                                                                                                                          | Returns voter set members.                                                            |
| get_voter_sets                                                |                                                                                   | name: text<br>threshold: integer<br>gorvernor: text                                                                                                              | Returns voter sets with governor.                                                     |
| get_summary                                                   |                                                                                   | providers: integer<br>clusters: integer<br>containers: integer<br>voter_sets: integer<br>nodes: integer<br>blockchains: integer                                  | Returns number of providers, clusters, containers, voter sets, nodes and blockchains. |
| get_common_proposals_range                                    | from: timestamp<br>until: timestamp<br>only_pending: boolean                      | list\<(rowid, proposal_type: common_proposal_type, state: common_proposal_state)\>                                                                                | Returns common proposal rowid, proposal_type and state.                               |
| get_relevant_common_proposals                                 | from: timestamp<br>until: timestamp<br>only_pending: boolean<br>my_pubkey: pubkey | list\<(rowid, proposal_type: common_proposal_type, state: common_proposal_state)\>                                                                                | Returns relevant common proposal rowid, proposal_type and state for voter pubkey.     |
| get_common_proposal                                           | id: rowid?                                                                        | id: rowid, timestamp: integer, type: common_proposal_type, proposed_by: pubkey, description: text, state: common_proposal_state                                  | Returns common proposal info.                                                         |
| get_common_proposal_voting_results                            | rowid                                                                             | common_proposal_voting_results                                                                                                                                    | Returns common proposal voting results.                                               |
| get_common_proposal_voter_info                                | rowid                                                                             | list\<common_proposal_voter\>                                                                                                                                     | Returns common proposal voting info.                                                  |
| get_common_pubkey_votes                                       | from: timestamp<br>until: timestamp<br>pubkey                                     | list\<(proposal, vote)\>                                                                                                                                          | Returns common proposal and votes by criteria.                                        |
| get_economy_chain_rid                                         |                                                                                   | byte_array                                                                                                                                                        | Returns economy chain rid.                                                            |
| get_proposals_range                                           | from: timestamp<br>until: timestamp<br>only_pending: boolean                      | list\<(rowid, proposal_type, state: proposal_state)\>                                                                                                             | Returns proposals by criteria.                                                        |
| get_relevant_proposals                                        | from: timestamp<br>until: timestamp<br>only_pending: boolean<br>my_pubkey: pubkey | list\<(rowid, proposal_type, state: proposal_state)\>                                                                                                             | Returns proposals by criteria.                                                        |
| get_proposal                                                  | id: rowid?                                                                        | id: rowid<br>timestamp: integer<br>type: proposal_type<br>proposed_by: pubkey<br>description: text<br>state: proposal_state                                      | Returns proposals by rowId.                                                           |
| get_proposal_voting_results                                   | rowid                                                                             | proposal_voting_results                                                                                                                                           | Returns proposals voting results.                                                     |
| get_proposal_voter_info                                       | rowid                                                                             | list\<proposal_voter\>                                                                                                                                            | Returns proposal voters info.                                                         |
| get_blockchain_configuration_update_attempt_state_by_tx_rid   | tx_rid: byte_array                                                                | blockchain_configuration_attempt_data?                                                                                                                            | Returns blockchain configuration update attempt by tx rid.                            |
| get_blockchain_configuration_update_attempt_state_by_proposal | rowid                                                                             | blockchain_configuration_attempt_data?                                                                                                                            | Returns blockchain configuration update attempt by proposal.                          |
| get_provider_votes                                            | from: timestamp<br>until: timestamp<br>provider_key: pubkey                       | list\<(proposal, vote)\>                                                                                                                                          | Returns proposals and votes by provider.                                              |
| get_blockchain_proposal                                       | rowid                                                                             | data:byte_array<br>container:text                                                                                                                                 | Returns blockchain proposal.                                                          |
| find_blockchain_rid                                           | tx_rid: byte_array                                                                | byte_array?                                                                                                                                                       | Returns added blockchain.                                                             |
| get_blockchain_action_proposal                                | rowid                                                                             | pending_blockchain_action                                                                                                                                         | Returns blockchain action proposal.                                                   |
| get_blockchain_unarchive_action_proposal                      | rowid                                                                             | rid: pubkey<br>name<br>action: blockchain_action<br>source_container: text<br>destination_container: text <br>final_height: integer                              | Returns blockchain unarchive action proposal.                                         |
| get_configuration_proposal                                    | rowid?                                                                            | current_conf: blockchain_configuration_data<br>proposed_conf:pending_blockchain_configuration_data                                                                | Returns blockchain configuration proposal.                                            |
| get_configuration_proposal_at                                 | rowid?                                                                            | current_conf: blockchain_configuration_data<br>proposed_conf:pending_blockchain_configuration_at_data                                                             | Returns blockchain configuration proposal at.                                         |
| get_proposed_forced_configuration                             | rowid?                                                                            | current_conf: blockchain_configuration_data<br>forced_conf: proposed_forced_configuration_data                                                                    | Returns forced blockchain configuration proposal.                                     |
| get_forced_configuration                                      | blockchain_rid: byte_array                                                        | list\<forced_configuration_data\>                                                                                                                                 | Returns forced blockchain configuration by blockchain rid.                            |
| get_blockchain_import_proposal                                | rowid?                                                                            | name: text<br>blockchain_rid: byte_array<br>config_data: byte_array<br>container: text                                                                            | Returns blockchain import proposal.                                                   |
| get_configuration_import_proposal                             | rowid?                                                                            | blockchain_rid: byte_array<br>height: integer<br>config_data: byte_array                                                                                          | Returns blockchain configuration import proposal.                                     |
| get_finish_blockchain_import_proposal                         | rowid?                                                                            | blockchain_rid: byte_array<br>final_height: integer?                                                                                                              | Returns finish blockchain import proposal.                                            |
| get_foreign_blockchain_blocks_import_proposal                 | rowid?                                                                            | blockchain_rid: byte_array<br>final_height: integer?                                                                                                              | Returns foreign blockchain blocks import proposal.                                    |
| get_foreign_blockchain_import_proposal                        | rowid?                                                                            | foreign_node : pubkey<br>host: text<br>port: integer<br>api_url: text<br>chain0_rid: byte_array<br>blockchain_name: text<br>blockchain_rid: byte_array<br>container: text | Returns foreign blockchain import proposal.                                           |
| get_blockchain_move_proposal                                  | rowid?                                                                            | blockchain_rid: byte_array<br>blockchain_name: text<br>container: text<br>cluster: text                                                                           | Returns blockchain move proposal.                                                     |
| get_blockchain_move_finish_proposal                           | rowid?                                                                            | blockchain_rid: byte_array<br>blockchain_name: text<br>cluster: text<br>container: text<br>final_height: integer                                                  | Returns blockchain move finish proposal.                                              |
| get_cluster_limits_proposal                                   | rowid                                                                             | cluster: text<br>cluster_units: integer<br>extra_storage: integer                                                                                                 | Returns cluster limits proposal.                                                      |
| get_cluster_provider_proposal                                 | rowid?                                                                            | cluster: text<br>provider: pubkey<br>add: boolean                                                                                                                 | Returns cluster provider proposal.                                                    |
| get_cluster_remove_proposal                                   | rowid                                                                             | name: text                                                                                                                                                        | Returns cluster remove proposal.                                                      |
| get_cluster_anchoring_configuration_proposal                  | rowid?                                                                            | current_conf: byte_array<br>proposed_conf : byte_array                                                                                                            | Returns cluster anchoring configuration proposal.                                     |
| get_container_proposal                                        | rowid                                                                             | name: text<br>container_units: integer<br>max_blockchains: integer<br>extra_storage: integer                                                                      | Returns container proposal.                                                           |
| get_container_limits_proposal                                 | rowid                                                                             | container: text<br>container_units: integer<br>max_blockchains:integer<br>extra_storage: integer                                                                  | Returns container limits proposal.                                                    |
| get_container_remove_proposal                                 | rowid?                                                                            | text                                                                                                                                                              | Returns container remove proposal container name.                                     |
| get_provider_batch_proposal                                   | rowid                                                                             | provider_infos: list\<provider_info\><br>tier: provider_tier<br>system: boolean<br>active: boolean                                                                | Returns provider batch proposal.                                                      |
| get_system_provider_proposal                                  | rowid                                                                             | provider: pubkey<br>add: boolean                                                                                                                                  | Returns system provider proposal.                                                     |
| get_provider_quota_proposal                                   | rowid                                                                             | tier: provider_tier<br>quota_type: provider_quota_type<br>value: integer                                                                                          | Returns system provider quota proposal.                                               |
| get_provider_state_proposal                                   | rowid                                                                             | provider: pubkey<br>provider_name: text<br>active: boolean                                                                                                        | Returns provider state proposal.                                                      |
| get_voter_set_update_proposal                                 | id: integer                                                                       | voter_set: text<br>threshold: integer<br>governor: text<br>add_member: pubkey<br>remove_member: pubkey                                                           | Returns voter set update proposal.                                                    |

## Return types

| Name                                     | Type   | Fields                                                                                                                                                                                                           |
|------------------------------------------|--------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| provider                                 | entity | pubkey<br>name: text<br>url: text<br>active: boolean<br>tier: provider_tier<br>system: boolean                                                                                                                   |
| provider_tier                            | enum   | DAPP_PROVIDER<br>NODE_PROVIDER                                                                                                                                                                         |
| provider_node_data                       | struct | pubkey<br>active: boolean<br>host: text<br>port: integer<br>api_url: text<br>last_updated: timestamp<br>territory: text?                                                                                         |
| cluster_data                             | struct | name<br>governor: text<br>is_operational: boolean<br>cluster_units: integer?<br>extra_storage: integer?<br>number_of_nodes: integer?<br>container_units_available: integer?<br>extra_storage_available: integer? |
| cluster_node                             | struct | cluster<br>node                                                                                                                                                                                                  |
| cluster                                  | entity | key name<br>governance: voter_set<br>mutable operational: boolean<br>mutable cluster_units: integer<br>mutable extra_storage: integer                                                                            |
| node                                     | entity | provider<br>pubkey<br>active: boolean<br>host: text<br>port: integer<br>api_url: text<br>last_updated: timestamp<br>cluster_units: integer<br>territory: text<br>extra_storage: integer                          |
| node_data                                | struct | provider: pubkey<br>pubkey<br>active: boolean<br>host: text<br>port: integer<br>last_updated: timestamp<br>api_url: text<br>cluster_units: integer?<br>territory: text?<br>extra_storage: integer?               |
| container                                | entity | name<br>cluster<br>deployer: voter_set<br>proposed_by: provider<br>system: boolean<br>latest_bc_removal: timestamp <br>state: container_state                                                                    |
| container_data                           | struct | name: text<br>cluster: text<br>deployer: text<br>proposed_by_pubkey: byte_array<br>proposed_by_name: text<br>system: boolean<br>state: container_state?                                                          |
| container_blockchain                     | entity | container<br>blockchain                                                                                                                                                                                          |
| blockchain                               | entity | rid: byte_array<br>name: text<br>system: boolean<br>state: blockchain_state                                                                                                                                      |
| blockchain_info                          | struct | rid: byte_array<br>name: text<br>state: blockchain_state<br>container: name?<br>cluster: name?<br>system: boolean?<br>is_foreign_importing: boolean?<br>is_moving: boolean?<br>is_unarchiving: boolean?          |
| blockchain_signers_info                  | struct | height: integer<br>signers: list\<pubkey\>                                                                                                                                                                       |
| importing_foreign_blockchain             | entity | blockchain_rid: byte_array<br>pubkey<br>host: text<br>port: integer<br>api_url: text<br>chain0_rid: byte_array<br>mutable final_height: integer                                                                  |
| moving_blockchain                        | entity | blockchain<br>transaction<br>source: container<br>destination: container<br>final_height: integer<br>remove_on_nodes: byte_array                                                                                 |
| unarchiving_blockchain                   | entity | blockchain<br>transaction<br>source: container<br>destination: container<br>final_height: integer                                                                                                                |
| voter_set                                | entity | name<br>threshold: integer                                                                                                                                                                                       |
| voter_set_governance                     | entity | voter_set<br>governor: voter_set                                                                                                                                                                                 |
| common_proposal                          | entity | timestamp<br>proposal_type: common_proposal_type<br>proposed_by: pubkey<br>voter_set: common_voter_set<br>description: text<br>transaction<br> state: common_proposal_state                                      |
| common_proposal_voter                    | struct | pubkey: byte_array<br>vote: boolean                                                                                                                                                                              |
| common_proposal_voting_results           | struct | positive_votes: integer<br>negative_votes: integer<br>max_votes: integer<br>threshold: integer<br>voting_result: common_voting_result                                                                            |
| blockchain_configuration_attempt_data    | struct | state: blockchain_configuration_update_state<br>applied_at_height: integer                                                                                                                                       |
| pending_blockchain_action                | entity | proposal<br>blockchain<br>action: blockchain_action<br>args: byte_array                                                                                                                                          |
| blockchain_configuration_data            | struct | height: integer<br>blockchain<br>data: byte_array                                                                                                                                                                |
| pending_blockchain_configuration_data    | struct | proposal<br>blockchain<br>data: byte_array                                                                                                                                                                       |
| pending_blockchain_configuration_at_data | struct | proposal<br>blockchain<br>data: byte_array<br>height: integer<br>force: boolean                                                                                                                                  |
| proposed_forced_configuration_data       | struct | proposal<br>blockchain<br>height: integer<br>config_data: byte_array                                                                                                                                             |
| forced_configuration_data                | struct | blockchain<br>height: integer<br>config_hash: byte_array                                                                                                                                                         |
| pending_foreign_blockchain_import        | entity | proposal<br>pubkey<br>host: text<br>port: integer<br>api_url: text<br>chain0_rid: byte_array<br>blockchain_name: text<br>blockchain_rid: byte_array<br>initial_config_data: byte_array<br>container              |
| provider_infos                           | struct | pubkey<br>name<br>url: text                                                                                                                                                                                      |
| provider_quota_type                      | enum   | max_actions_per_day<br>max_nodes<br>max_containers                                                                                                                                                               |

