module;

import ^.chain0_icmf_receiver.*;
import ^.config_common.*;

@extend(receive_icmf_message) function receive_configuration_updated(sender: byte_array, topic: text, body: gtv) {
    if (topic != configuration_updated_topic) return;

    val data = configuration_updated.from_gtv(body);
    log("Received updated configuration for chain %s at height %d to %s".format(data.blockchain_rid, data.height, data.config_hash));
    // TODO record updated configuration
}
